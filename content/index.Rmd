---
title: "compliance_testing_0.6"
author: "Richard Leyshon"
date: "`r format(Sys.Date(), '%d/%m/%y')`"
lang: "en"
output:
  html_document:
    toc: true
    toc_float: true
    number_sections: true
---



```{r include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
# some commented out code to review
summary(cars)
```

## Plot Alt Text

You can also embed plots, for example:

```{r plot, echo=TRUE, fig.alt="Some placeholder alt text for a chart"}
plot(pressure)
```

The above uses the `fig.alt` option on a base R plot. This causes an issue on [WAVE](https://wave.webaim.org/report#/https://datasciencecampus.github.io/DSCA_WCAG-2.1-Compliance/) as the image title attribute is set to the same value as the alt text.

***

```{r plot2, echo=TRUE, fig.alt="Some different alt text for a chart"}

ggplot(data = pressure, aes(temperature, pressure)) +
  geom_point() +
  labs(title  = "Some placeholder title")
```

Again, using `fig.alt` option above but this time specifying a chart title using {ggplot2} syntax does not resolve the issue with title and alt attributes having the same value. 

***

```{r plot3, echo=TRUE, fig.cap="Using fig.cap instead"}

ggplot(data = pressure, aes(temperature, pressure)) +
  geom_point() +
  labs(title  = "Some placeholder title")
```

Using the `fig.cap` chunk option avoids the issue with redundant title warning that comes with `fig.alt`. This provides a redundant text warning which I feel is more helpful than the redundant title warning for VI learners. Note that specifying the YAML option `fig_caption: false` does not resolve this issue, instead raising the redundant title warning again. This means [screen reader users will hear the text twice](https://r-resources.massey.ac.nz/rmarkdown/)

***

Joo young Seo suggests the use of {BrailleR} (among others) for improving VI access of data & charts. Not published to CRAN at time of writing. Maintainer appears to be working on it.

```{r}
# devtools::install_github("ajrgodfrey/BrailleR")
library(BrailleR)
```
Option 1 selected.

```{r plot4, echo=TRUE, comment=""}

VI(ggplot(data = pressure, aes(temperature, pressure)) +
  geom_point() +
  labs(title  = "Some placeholder title"))
```



***
***

## Code Output

```{r}
# some unadjusted code with no chunk options
1:100
```

```{r, comment=""}
# adjusted chunk options: `comment=""`, as recommended in Yihui see resources section.
1:100
```
Counterintuitively, the chunk option `comment=""` affects the chunk output rather than the appearance of code comments.



## Resources

[Yihui, Rmarkdown cookbook](https://bookdown.org/yihui/rmarkdown-cookbook/html-accessibility.html)

[A. Jonathan R. Godfrey, 2018](https://r-resources.massey.ac.nz/rmarkdown/)

[Joo Young Seo, 2020](https://jooyoungseo.com/post/ds4blind/)
